<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HORARIOS</title>
	    <style>
        /* Estilo para ocultar las secciones por defecto */
        .seccion {
            display: none;
        }
    </style>
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">

<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script type="text/javascript" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
  
</head>
<body>


<script type="text/javascript">

</script>



    <h1><center>HORARIO ESPACIOS U ROSARIO</center></h1>




<div class="btn-group btn-lg btn-block"  role="group" aria-label="Basic example">
    <!-- Botones para mostrar/ocultar secciones -->
    <button type="button" class="btn btn-success" onclick="mostrarSeccion(1)">CLAUSTRO</button>
    <button type="button" class="btn btn-success" onclick="mostrarSeccion(2)">TORRE 1</button>
    <button type="button" class="btn btn-success" onclick="mostrarSeccion(3)">TORRE 2</button>
	<button type="button" class="btn btn-success" onclick="mostrarSeccion(4)">EL TIEMPO</button>
    <button type="button" class="btn btn-success" onclick="mostrarSeccion(5)">CASUR PISO 2</button>
    <button type="button" class="btn btn-success" onclick="mostrarSeccion(6)">CASUR PISO 3</button>
    <button type="button" class="btn btn-success" onclick="mostrarSeccion(7)">CASUR PISO 4</button>
    <button type="button" class="btn btn-success"onclick="mostrarSeccion(8)">CASUR PISO 5</button>
    <button type="button" class="btn btn-success" onclick="mostrarSeccion(9)">CASUR PISO 6</button>
    <button type="button" class="btn btn-success" onclick="mostrarSeccion(10)">PEDRO FERMIN</button>
    <button type="button" class="btn btn-success" onclick="mostrarSeccion(11)">CASA ROSARISTA</button>
<button type="button" class="btn btn-success" onclick="mostrarSeccion(12)">NOVA GSB</button>
 </div>  
    <!-- Puedes agregar más botones según sea necesario -->

    <!-- Sección 1: Botones 1-10 -->
    <div class="seccion" id="seccion1">
        <h3>CLAUSTRO</h3>
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
			<button class="btn btn-info urlBtn" data-url="2250">Auditorio-JOCKEY </button>
			<button class="btn btn-info urlBtn" data-url="223">Auditorio-MUTIS </button>
			<button class="btn btn-info urlBtn" data-url="18">Salon-126 </button>
			<button class="btn btn-info urlBtn" data-url="1">Salon-127 </button>
			<button class="btn btn-info urlBtn" data-url="2">Salon-128 </button>
			<button class="btn btn-info urlBtn" data-url="3">Salon-129 </button>
			<button class="btn btn-info urlBtn" data-url="1240">Salon-225 </button>
			<button class="btn btn-info urlBtn" data-url="140">Salon-230 </button>
			<button class="btn btn-info urlBtn" data-url="4">Salon-232 </button>
			<button class="btn btn-info urlBtn" data-url="5">Salon-234 </button>
			<button class="btn btn-info urlBtn" data-url="283">TEATRINO </button>
		</div>
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
			<button class="btn btn-info urlBtn" data-url="2349">PATIO-PRINCIPAL-Arco-#-2 </button>
			<button class="btn btn-info urlBtn" data-url="2351">PATIO-PRINCIPAL-Arco-#-3 </button>
			<button class="btn btn-info urlBtn" data-url="2353">PATIO-PRINCIPAL-Arco-#-4 </button>
			<button class="btn btn-info urlBtn" data-url="2355">PATIO-PRINCIPAL-Arco-#-5 </button>
			<button class="btn btn-info urlBtn" data-url="2357">PATIO-PRINCIPAL-Arco-#-6 </button>
			<button class="btn btn-info urlBtn" data-url="2359">PATIO-PRINCIPAL-Arco-#-7 </button>
			<button class="btn btn-info urlBtn" data-url="2361">PATIO-PRINCIPAL-Arco-#-10 </button>
			<button class="btn btn-info urlBtn" data-url="2363">PATIO-PRINCIPAL-Arco-#-12 </button>
			<button class="btn btn-info urlBtn" data-url="2366">PATIO-PRINCIPAL-Arco-#-13 </button>
			<button class="btn btn-info urlBtn" data-url="2368">PATIO-PRINCIPAL-Arco-#-14 </button>
			<button class="btn btn-info urlBtn" data-url="2370">PATIO-PRINCIPAL-Arco-#-15 </button>
		</div>
    </div>

    <!-- Sección 2: Botones 11-20 -->
    <div class="seccion" id="seccion2">
        <h3>TORRE 1</h3>
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
			<button class="btn btn-info urlBtn" data-url="19">Salon-501 </button>
			<button class="btn btn-info urlBtn" data-url="20">Salon-502 </button>
			<button class="btn btn-info urlBtn" data-url="22">Salon-601 </button>
			<button class="btn btn-info urlBtn" data-url="23">Salon-602 </button>
			<button class="btn btn-info urlBtn" data-url="25">Salon-701 </button>
			<button class="btn btn-info urlBtn" data-url="26">Salon-702 </button>
			<button class="btn btn-info urlBtn" data-url="28">Salon-802 </button>
			<button class="btn btn-info urlBtn" data-url="29">Salon-801 </button>
		</div>

    </div>

    <!-- Sección 3: Botones 21-30 -->
    <div class="seccion" id="seccion3">
        <h3>TORRE 2</h3>
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
			<button class="btn btn-info urlBtn" data-url="1301">Aula-de-Informatica-A </button>
			<button class="btn btn-info urlBtn" data-url="13">Aula-de-Informatica-B </button>
			<button class="btn btn-info urlBtn" data-url="31">Sala-Computo-3-(Windows)-C-sotano-T2 </button>
			<button class="btn btn-info urlBtn" data-url="33">Aula-de-Informatica-D </button>
			<button class="btn btn-info urlBtn" data-url="187">Salon-201 </button>
			<button class="btn btn-info urlBtn" data-url="188">Salon-202 </button>
			<button class="btn btn-info urlBtn" data-url="34">Salon-301 </button>
			<button class="btn btn-info urlBtn" data-url="35">Salon-302-Sala-Turing </button>
			<button class="btn btn-info urlBtn" data-url="3427">LABORATORIO-TESLA </button>
			<button class="btn btn-info urlBtn" data-url="4474">LABORATORIO-BIG-DATA </button>
		</div>	
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">	
			<button class="btn btn-primary urlBtn" data-url="41">Salon-HIPATIA </button>
			<button class="btn btn-primary urlBtn" data-url="42">Sala-LOVE-LACE </button>
			<button class="btn btn-primary urlBtn" data-url="179">Salon-601 </button>
			<button class="btn btn-primary urlBtn" data-url="45">Salon-701 </button>
			<button class="btn btn-primary urlBtn" data-url="46">Salon-702 </button>
			<button class="btn btn-primary urlBtn" data-url="49">Salon-801 </button>
			<button class="btn btn-primary urlBtn" data-url="50">Salon-802 </button>
			<button class="btn btn-primary urlBtn" data-url="52">Salon-901 </button>
			<button class="btn btn-primary urlBtn" data-url="53">Salon-902 </button>
			<button class="btn btn-primary urlBtn" data-url="55">Salon-1001 </button>
		</div>
    </div>
	
	<div class="seccion" id="seccion4">
        <h3>EL TIEMPO</h3>
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
			<button class="btn btn-primary urlBtn" data-url="4905">Auditorio-CENTRO-DE-DIALOGO </button>
			<button class="btn btn-primary urlBtn" data-url="4947">Sala-DEBATE </button>
			<button class="btn btn-primary urlBtn" data-url="4687">BEATS </button>
			<button class="btn btn-primary urlBtn" data-url="5033">Sala-NASH </button>
			<button class="btn btn-primary urlBtn" data-url="4689">LABORATORIO-BARDEEN </button>
			
			
			<button class="btn btn-primary urlBtn" data-url="4685">Sala-BOOLE </button>
			<button class="btn btn-primary urlBtn" data-url="5027">LABORATORIO-NOETHER </button>
			<button class="btn btn-primary urlBtn" data-url="5029">Sala-HINNT </button>
			<button class="btn btn-primary urlBtn" data-url="5031">LABORATORIO-BERNOULLI </button>
			
			<button class="btn btn-primary urlBtn" data-url="5035">LABORATORIO-Da-Vinci </button>
			<button class="btn btn-primary urlBtn" data-url="5037">LABORATORIO-VOLTA </button>
			<button class="btn btn-primary urlBtn" data-url="5087">Zona-Auditorio </button>
			<button class="btn btn-primary urlBtn" data-url="5527">SALON-CULTURA </button>
		</div>
	</div>
	<div class="seccion" id="seccion5">
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
        <h3>CASUR PISO 2</h3>

		</div>
	</div>
	
	<div class="seccion" id="seccion6">
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
        <h3>CASUR PISO 3</h3>
		</div>
	</div>
	
	<div class="seccion" id="seccion7">
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
        <h3>CASUR PISO 4</h3>

		</div>
	</div>
	
	<div class="seccion" id="seccion8">
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
        <h3>CASUR PISO 5</h3>
		
		</div>
	</div>
	
	<div class="seccion" id="seccion9">
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
        <h3>CASUR PISO 6</h3>
	
		</div>
	</div>
	
	<div class="seccion" id="seccion10">
		
        <h3>PEDRO FERMIN</h3>
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
			<button class="btn btn-info urlBtn" data-url="67">Auditorio-1 </button>
			<button class="btn btn-info urlBtn" data-url="68">Auditorio-2 </button>
			<button class="btn btn-info urlBtn" data-url="69">Auditorio-3 </button>
		</div>
	</div>
	
	<div class="seccion" id="seccion11">
	<h3>CASA ROSARISTA</h3>
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
        
			<button class="btn btn-info urlBtn" data-url="1209">Salon-BURGOS </button>
			<button class="btn btn-info urlBtn" data-url="1309">Salon-JAGUAL </button>
			<button class="btn btn-info urlBtn" data-url="1310">Salon-GUINA </button>
			<button class="btn btn-info urlBtn" data-url="1311">Salon-CALANDAYMA </button>
			<button class="btn btn-info urlBtn" data-url="1312">Salon-NIEVES </button>
			<button class="btn btn-info urlBtn" data-url="1313">Salon-MESITAS </button>
			<button class="btn btn-info urlBtn" data-url="1320">Salon-SAN-VICENTE </button>
			<button class="btn btn-info urlBtn" data-url="2258">PATIO-FUENTE </button>
		</div>
	</div>

	<div class="seccion" id="seccion12">
		
        <h3>NOVA GSB</h3>
		<div class="btn-group btn-lg btn-block" role="group" aria-label="Basic example">
			<button class="btn btn-info urlBtn" data-url="2585">Salon-301 </button>
			<button class="btn btn-info urlBtn" data-url="2586">Salon-302 </button>
			<button class="btn btn-info urlBtn" data-url="2584">Salon-303 </button>
			<button class="btn btn-info urlBtn" data-url="2581">Salon-501 </button>
			<button class="btn btn-info urlBtn" data-url="2582">Salon-502 </button>
			<button class="btn btn-info urlBtn" data-url="3445">Salon-503 </button>
			<button class="btn btn-info urlBtn" data-url="3447">Salon-504 </button>
			<button class="btn btn-info urlBtn" data-url="4185">Salon-505 </button>
			<button class="btn btn-info urlBtn" data-url="4187">Salon-506 </button>
			<button class="btn btn-info urlBtn" data-url="4287">LABORATORIO-DE-INNOVACION-PEDAGOGICA </button>
			<button class="btn btn-info urlBtn" data-url="2601">Sala-de-TELECONFERENCIA </button>
			<button class="btn btn-info urlBtn" data-url="2781">AUDITORIO-OCTAVIO-AMAYA-GALARZA </button>
			<button class="btn btn-info urlBtn" data-url="5368">SALON-POLIVALENTE-EDUARDO-GARCIA-VARGAS </button>
			<button class="btn btn-info urlBtn" data-url="5247">Centro-Avanzado-de-Simulacion-Clinica-e-Innovacion-Tecnologica-(CASCIT)-GSB </button>
		</div>
	</div>
    <!-- Tabla para mostrar los resultados -->
	<div class="table-responsive">
		<table class="table table-striped" border="1" id="tablaResultados">
			
		  <thead>
			<tr>
			  <th >DIA</th>
			  <th >HORARIO</th>
			  <th >CLASE-ACTIVIDAD</th>
			  <th >GRUPO</th>
			  <th >DOCENTE</th>
			  <th >FECHA INICIO</th>
			  <th >FECHA FIN</th>
			</tr>
		  </thead>

			<tbody>

				<!-- Aquí se agregarán las filas dinámicamente -->
			</tbody>
		</table>
	</div>
	
	
    <script>
		
        // Función para cargar la tabla desde la URL dinámica
        async function cargarTabla(urlValue) {
            const url = `https://api.allorigins.win/get?url=${encodeURIComponent(`https://appsweb.urosario.edu.co/horario/index.php?salon=${urlValue}`)}`;

            const tabla = document.getElementById("tablaResultados").querySelector("tbody");
            tabla.innerHTML = "<tr><td colspan='3'>Cargando datos...</td></tr>"; // Mensaje de carga

            try {
                // Realizar la consulta a la URL
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`Error al consultar ${url}: ${response.status}`);
                }
                const data = await response.json(); // AllOrigins devuelve JSON

                // Parsear el HTML de la respuesta
                const parser = new DOMParser();
                const doc = parser.parseFromString(data.contents, "text/html");

                // Seleccionar las filas de la tabla
                const filas = doc.querySelectorAll("table tr"); // Cambia el selector si es necesario
                if (filas.length > 0) {
                    // Limpiar el cuerpo de la tabla y agregar las filas
                    tabla.innerHTML = ""; 
                    filas.forEach((fila, index) => {
                        const primeraCelda = fila.cells[0];
						var fila_act="";
						if (primeraCelda && primeraCelda.textContent.trim().startsWith('D')) {
						}
						else{
							
							if(fila.childElementCount==6){								
								fila_act += '<td>'+fila.cells[0].innerText+'</td>';	
								fila_act += '<td>'+fila.cells[1].innerText+'</td>';
								fila_act += '<td>'+fila.cells[2].innerText+'</td>';	
								fila_act += '<td>'+fila.cells[3].innerText+'</td>';	
								fila_act += '<td>'+' '+'</td>';	
								fila_act += '<td>'+fila.cells[4].innerText+'</td>';	
								fila_act += '<td>'+fila.cells[5].innerText+'</td>';	
							}
							else{	
								fila_act += ('<td>'+fila.cells[0].innerText+'</td>');	
								fila_act += '<td>' +fila.cells[1].innerText+'</td>';
								fila_act += '<td>'+fila.cells[2].innerText+'</td>';	
								fila_act += '<td>'+fila.cells[3].innerText+'</td>';	
								fila_act += '<td>'+fila.cells[4].innerText+'</td>';	
								fila_act += '<td>'+fila.cells[5].innerText+'</td>';
								fila_act += '<td>'+fila.cells[6].innerText+'</td>';
							}
                            tabla.innerHTML += '<tr>'+fila_act+'</tr>'; // Agregar fila a la tabla
						}
                    });

                } else {
                    tabla.innerHTML = "<tr><td colspan='3'>No se encontró contenido en la tabla.</td></tr>";
                }
				
					const tablaResultados = $('#tablaResultados');
					if ($.fn.DataTable.isDataTable(tablaResultados)) {
						// Destruir instancia previa si existe
						tablaResultados.DataTable().destroy();
						console.log('murio');
					}
					// Crear nueva instancia
					tablaResultados.DataTable();
						
            } catch (error) {
                console.error(error);
                //tabla.innerHTML = `<tr><td colspan='3'>Error: ${error.message}</td></tr>`;
            }
	}
        // Función para mostrar/ocultar una sección
        function mostrarSeccion(seccionId) {
            // Primero, ocultamos todas las secciones
            const secciones = document.querySelectorAll('.seccion');
            secciones.forEach(seccion => {
                seccion.style.display = 'none';
            });
            // Luego mostramos la sección solicitada
            const seccion = document.getElementById('seccion' + seccionId);
            if (seccion) {
                seccion.style.display = 'block';
            }
        }
		
        // Añadir evento a los botones
        const botones = document.querySelectorAll(".urlBtn");
        botones.forEach(boton => {
            boton.addEventListener("click", () => 
			{
                const urlValue = boton.getAttribute("data-url");
                cargarTabla(urlValue); // Llamar a la función con el valor de la URL
            });
        });
    </script>
</body>
</html>
